<!-- Code Generated by Sidekick is for learning and experimentation purposes only. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cricket Player Auction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Extra style for setup form */
    #setupForm {
      max-width: 420px;
      margin: 60px auto 0 auto;
      background: rgba(255,255,255,0.10);
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.13);
      padding: 32px 24px 24px 24px;
      color: #fff;
      text-align: center;
    }
    #setupForm label {
      display: block;
      margin: 18px 0 6px 0;
      font-size: 1.08rem;
      color: #ffe082;
      text-align: left;
    }
    #setupForm input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border-radius: 6px;
      border: 1.5px solid #ffe082;
      background: #fffde7;
      color: #263238;
      font-size: 1rem;
      margin-bottom: 8px;
      font-weight: 600;
      outline: none;
    }
    #setupForm input[type="text"]:focus {
      border: 2px solid #ffb300;
    }
    #playerListPreview {
      margin: 10px 0 16px 0;
      color: #b2dfdb;
      font-size: 1rem;
      text-align: left;
    }
    #setupForm button {
      margin-top: 18px;
      width: 100%;
      background: linear-gradient(90deg, #388e3c 60%, #a5d6a7 100%);
      color: #fff;
      font-size: 1.1rem;
    }
    #setupMsg {
      color: #ffe082;
      margin-top: 12px;
      font-size: 1.05rem;
    }
  </style>
</head>
<body>
  <div class="overlay"></div>

  <!-- Setup Form (hidden after setup) -->
  <form id="setupForm" autocomplete="off">
    <h2>Setup Auction</h2>
    <label for="captainA">Team A Captain Name:</label>
    <input type="text" id="captainA" required placeholder="e.g. Ankit" />
    <label for="captainB">Team B Captain Name:</label>
    <input type="text" id="captainB" required placeholder="e.g. Aneek" />

    <label>Add Players (Name, Role):</label>
    <div style="display:flex;gap:8px;">
      <input type="text" id="playerName" placeholder="Player Name" style="flex:2" />
      <input type="text" id="playerRole" placeholder="Role" style="flex:2" />
      <button type="button" onclick="addPlayerToList()" style="flex:1;background:#1976d2;">Add</button>
    </div>
    <div id="playerListPreview"></div>
    <button type="submit">Start Auction</button>
    <div id="setupMsg"></div>
  </form>

  <!-- Auction App (hidden before setup) -->
  <div class="container" id="auctionApp" style="display:none;">
    <header>
      <span class="auction-logo">üèèüí∞</span>
      <h1>Cricket Team Player Auction</h1>
      <div class="subtitle">Bid for your dream team ‚Äì IPL style!</div>
    </header>

    <div class="rules">
      <strong>Auction Rules:</strong>
      <ul>
        <li>No player can be skipped.</li>
        <li>Winning team chooses who goes first for the next bid.</li>
        <li>Each team has ‚Çπ15,000 total budget.</li>
        <li>Maximum 6 players per team.</li>
      </ul>
    </div>

    <div class="teams-container">
      <div class="team" id="teamA" data-theme="Team A">
        <h2>Team A - <span id="captainAName"></span></h2>
        <p>Remaining Budget: ‚Çπ<span id="budgetA">15000</span></p>
        <table>
          <thead>
            <tr><th>Player</th><th>Price</th></tr>
          </thead>
          <tbody id="listA"></tbody>
        </table>
      </div>
      <div class="team" id="teamB" data-theme="Team B">
        <h2>Team B - <span id="captainBName"></span></h2>
        <p>Remaining Budget: ‚Çπ<span id="budgetB">15000</span></p>
        <table>
          <thead>
            <tr><th>Player</th><th>Price</th></tr>
          </thead>
          <tbody id="listB"></tbody>
        </table>
      </div>
    </div>

    <div class="player-slider" id="slider"></div>

    <div class="controls">
      <input type="number" id="priceInput" placeholder="Bid Price ‚Çπ" min="0" />
      <button class="btn-team-a" onclick="assignPlayer('A')">Assign to Team A</button>
      <button class="btn-team-b" onclick="assignPlayer('B')">Assign to Team B</button>
    </div>

    <div class="controls">
      <button class="btn-nav" onclick="prevPlayer()">‚¨Ö Previous</button>
      <button class="btn-nav" onclick="nextPlayer()">Next ‚û°</button>
    </div>
  </div>

  <script>
    // Code Generated by Sidekick is for learning and experimentation purposes only.

    // --- SETUP FORM LOGIC ---
    let setupPlayers = [];

    function addPlayerToList() {
      const name = document.getElementById('playerName').value.trim();
      const role = document.getElementById('playerRole').value.trim();
      if (!name || !role) {
        document.getElementById('setupMsg').textContent = "Enter both player name and role.";
        return;
      }
      setupPlayers.push({ name, role });
      document.getElementById('playerName').value = '';
      document.getElementById('playerRole').value = '';
      updatePlayerListPreview();
      document.getElementById('setupMsg').textContent = "";
    }

    function updatePlayerListPreview() {
      const preview = document.getElementById('playerListPreview');
      if (setupPlayers.length === 0) {
        preview.innerHTML = "<em>No players added yet.</em>";
      } else {
        preview.innerHTML = "<strong>Players:</strong><br>" +
          setupPlayers.map(p => `${p.name} (${p.role})`).join("<br>");
      }
    }

    document.getElementById('setupForm').onsubmit = function(e) {
      e.preventDefault();
      const captainA = document.getElementById('captainA').value.trim();
      const captainB = document.getElementById('captainB').value.trim();
      if (!captainA || !captainB) {
        document.getElementById('setupMsg').textContent = "Please enter both captain names.";
        return;
      }
      if (setupPlayers.length === 0) {
        document.getElementById('setupMsg').textContent = "Add at least one player.";
        return;
      }
      // Save to localStorage
      localStorage.setItem('captainA', captainA);
      localStorage.setItem('captainB', captainB);
      localStorage.setItem('auctionPlayers', JSON.stringify(setupPlayers));
      document.getElementById('setupMsg').textContent = "Setup complete! Starting auction...";
      setTimeout(() => {
        document.getElementById('setupForm').style.display = "none";
        startAuction();
      }, 700);
    };

    // --- AUCTION LOGIC ---
    let allPlayers = [];
    let current = 0;
    let budgetA = 15000;
    let budgetB = 15000;
    const maxPlayers = 6;
    const teamAList = [];
    const teamBList = [];

    function getRoleIcon(role) {
      role = role.toLowerCase();
      if (role.includes('all rounder')) return 'üèèüéØüß§';
      if (role.includes('batsman')) return 'üèè';
      if (role.includes('bowler')) return 'üéØ';
      if (role.includes('fielder')) return 'üß§';
      return 'üèè';
    }

    function shufflePlayers(players) {
      for (let i = players.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [players[i], players[j]] = [players[j], players[i]];
      }
      return players;
    }

    function renderPlayer() {
      const player = allPlayers[current];
      const container = document.getElementById('slider');
      container.innerHTML = `
        <div class="player-icon">${getRoleIcon(player.role)}</div>
        <h2>${player.name}</h2>
        <p>Role: ${player.role}</p>
      `;
    }

    function updateTeams() {
      document.getElementById('budgetA').innerText = budgetA;
      document.getElementById('budgetB').innerText = budgetB;
      document.getElementById('listA').innerHTML =
        teamAList.map((p) => `<tr><td>${p.name}</td><td>‚Çπ${p.price}</td></tr>`).join('');
      document.getElementById('listB').innerHTML =
        teamBList.map((p) => `<tr><td>${p.name}</td><td>‚Çπ${p.price}</td></tr>`).join('');
    }

    function assignPlayer(team) {
      const player = allPlayers[current];
      const price = Number(document.getElementById('priceInput').value);
      if (!price || price <= 0) {
        alert('Please enter a valid price.');
        return;
      }
      if (team === 'A') {
        if (teamAList.length >= maxPlayers) return alert('Team A has max players!');
        if (price > budgetA) return alert('Not enough budget for Team A!');
        teamAList.push({ ...player, price });
        budgetA -= price;
      } else {
        if (teamBList.length >= maxPlayers) return alert('Team B has max players!');
        if (price > budgetB) return alert('Not enough budget for Team B!');
        teamBList.push({ ...player, price });
        budgetB -= price;
      }
      updateTeams();
      nextPlayer();
    }

    function nextPlayer() {
      if (teamAList.length + teamBList.length < current + 1) {
        alert('You must assign the player before moving forward.');
        return;
      }
      if (current < allPlayers.length - 1) {
        current++;
        renderPlayer();
        document.getElementById('priceInput').value = '';
      } else {
        alert('Auction completed!');
      }
    }

    function prevPlayer() {
      if (current > 0) {
        current--;
        renderPlayer();
        document.getElementById('priceInput').value = '';
      }
    }

    function startAuction() {
      // Get from localStorage
      const captainA = localStorage.getItem('captainA') || 'Ankit';
      const captainB = localStorage.getItem('captainB') || 'Aneek';
      allPlayers = [];
      try {
        allPlayers = JSON.parse(localStorage.getItem('auctionPlayers')) || [];
      } catch (e) {}
      if (!allPlayers || allPlayers.length === 0) {
        allPlayers = [
          { name: 'Sourabh', role: 'All rounder' },
          { name: 'Manik', role: 'Bowler' },
          { name: 'Lokesh', role: 'All rounder' }
        ];
      }
      allPlayers = shufflePlayers(allPlayers);
      current = 0;
      budgetA = 15000;
      budgetB = 15000;
      teamAList.length = 0;
      teamBList.length = 0;

      // Show auction UI
      document.getElementById('auctionApp').style.display = "";
      document.getElementById('captainAName').textContent = captainA;
      document.getElementById('captainBName').textContent = captainB;
      renderPlayer();
      updateTeams();
    }

    // --- ON PAGE LOAD ---
    (function(){
      // If already setup, skip to auction
      const captainA = localStorage.getItem('captainA');
      const captainB = localStorage.getItem('captainB');
      const players = localStorage.getItem('auctionPlayers');
      if (captainA && captainB && players && JSON.parse(players).length > 0) {
        document.getElementById('setupForm').style.display = "none";
        startAuction();
      } else {
        updatePlayerListPreview();
      }
    })();
  </script>
</body>
</html>
