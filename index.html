<!-- Code Generated by Sidekick is for learning and experimentation purposes only. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cricket Player Auction</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="overlay"></div>
  <div class="container" id="auctionApp">
    <header>
      <span class="auction-logo">üèèüí∞</span>
      <h1>Cricket Team Player Auction</h1>
      <div class="subtitle">Bid for your dream team ‚Äì IPL style!</div>
    </header>
    <div class="rules">
      <strong>Auction Rules:</strong>
      <ul>
        <li>No player can be skipped.</li>
        <li>Winning team chooses who goes first for the next bid.</li>
        <li>Each team has ‚Çπ15,000 total budget.</li>
        <li id="maxPlayersRule"></li>
      </ul>
    </div>
    <div class="teams-container">
      <div class="team" id="teamA" data-theme="Team A">
        <h2>Team A - <span id="captainAName"></span></h2>
        <p>Remaining Budget: ‚Çπ<span id="budgetA">15000</span></p>
        <table>
          <thead>
            <tr><th>Player</th><th>Price</th></tr>
          </thead>
          <tbody id="listA"></tbody>
        </table>
      </div>
      <div class="team" id="teamB" data-theme="Team B">
        <h2>Team B - <span id="captainBName"></span></h2>
        <p>Remaining Budget: ‚Çπ<span id="budgetB">15000</span></p>
        <table>
          <thead>
            <tr><th>Player</th><th>Price</th></tr>
          </thead>
          <tbody id="listB"></tbody>
        </table>
      </div>
    </div>
        <div id="commonPlayerDisplay" style="text-align:center; margin: 20px 0; font-weight:bold; color:#ffb300;"></div>

    
    <div class="player-slider" id="slider"></div>
    <div class="controls">
      <input type="number" id="priceInput" placeholder="Bid Price ‚Çπ" min="0" />
      <button class="btn-team-a" onclick="assignPlayer('A')">Assign to Team A</button>
      <button class="btn-team-b" onclick="assignPlayer('B')">Assign to Team B</button>
    </div>
    <div class="controls">
      <button class="btn-nav" onclick="prevPlayer()">‚¨Ö Previous</button>
      <button class="btn-nav" onclick="nextPlayer()">Next ‚û°</button>
    </div>
    <div class="controls">
      <button class="btn-team-b" onclick="resetAuction()" style="background: #c62828; margin-top: 10px;">Reset Auction</button>
    </div>
    <div class="controls">
  <button class="btn-team-a" onclick="exportAuctionPDF()" style="background: #1976d2; margin-top: 10px;">Export Results as PDF</button>
</div>

  </div>
  
  <script>
    // Code Generated by Sidekick is for learning and experimentation purposes only.
    // --- AUCTION LOGIC ---
    let allPlayers = [];
    let current = 0;
    let budgetA = 15000;
    let budgetB = 15000;
    let maxPlayers = 6;
    const teamAList = [];
    const teamBList = [];

    function getRoleIcon(role) {
      role = role.toLowerCase();
      if (role.includes('all rounder')) return 'üèèüéØüß§';
      if (role.includes('batsman')) return 'üèè';
      if (role.includes('bowler')) return 'üéØ';
      if (role.includes('fielder')) return 'üß§';
      return 'üèè';
    }
    function shufflePlayers(players) {
      for (let i = players.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [players[i], players[j]] = [players[j], players[i]];
      }
      return players;
    }
    function renderPlayer() {
      const player = allPlayers[current];
      const container = document.getElementById('slider');
      container.innerHTML = `
        <div class="player-icon">${getRoleIcon(player.role)}</div>
        <h2>${player.name}</h2>
        <p>Role: ${player.role}</p>
      `;
    }
    function updateTeams() {
      document.getElementById('budgetA').innerText = budgetA;
      document.getElementById('budgetB').innerText = budgetB;
      document.getElementById('listA').innerHTML =
        teamAList.map((p) => `<tr><td>${p.name}</td><td>‚Çπ${p.price}</td></tr>`).join('');
      document.getElementById('listB').innerHTML =
        teamBList.map((p) => `<tr><td>${p.name}</td><td>‚Çπ${p.price}</td></tr>`).join('');
    }
    // Code Generated by Sidekick is for learning and experimentation purposes only.
function updateCommonPlayerDisplay() {
  const display = document.getElementById('commonPlayerDisplay');
  const commonPlayerStr = localStorage.getItem('commonPlayer');
  if (commonPlayerStr) {
    const common = JSON.parse(commonPlayerStr);
    display.textContent = `Common Player: ${common.name} (${common.role})`;
    display.style.display = "block";
  } else {
    display.textContent = "";
    display.style.display = "none";
  }
}

    function assignPlayer(team) {
      const player = allPlayers[current];
      const price = Number(document.getElementById('priceInput').value);
      if (!price || price <= 0) {
        alert('Please enter a valid price.');
        return;
      }
      if (team === 'A') {
        if (teamAList.length >= maxPlayers) return alert('Team A has max players!');
        if (price > budgetA) return alert('Not enough budget for Team A!');
        teamAList.push({ ...player, price });
        budgetA -= price;
      } else {
        if (teamBList.length >= maxPlayers) return alert('Team B has max players!');
        if (price > budgetB) return alert('Not enough budget for Team B!');
        teamBList.push({ ...player, price });
        budgetB -= price;
      }
      updateTeams();
        updateCommonPlayerDisplay();

      nextPlayer();
    }
    function nextPlayer() {
      if (teamAList.length + teamBList.length < current + 1) {
        alert('You must assign the player before moving forward.');
        return;
      }
      if (current < allPlayers.length - 1) {
        current++;
        renderPlayer();
        document.getElementById('priceInput').value = '';
      } else {
        alert('Auction completed!');
      }
    }
    function prevPlayer() {
      if (current > 0) {
        current--;
        renderPlayer();
        document.getElementById('priceInput').value = '';
      }
    }
    function startAuction() {
      // Get from localStorage
      const captainA = localStorage.getItem('captainA') || 'Ankit';
      const captainB = localStorage.getItem('captainB') || 'Aneek';
      allPlayers = [];
      try {
        allPlayers = JSON.parse(localStorage.getItem('auctionPlayers')) || [];
      } catch (e) {}
      if (!allPlayers || allPlayers.length === 0) {
        alert("No players found. Please set up teams first.");
        window.location.href = "team-management.html";
        return;
      }
      allPlayers = shufflePlayers(allPlayers);
      current = 0;
      budgetA = 15000;
      budgetB = 15000;
      teamAList.length = 0;
      teamBList.length = 0;
      maxPlayers = Math.floor(allPlayers.length / 2);
      document.getElementById('captainAName').textContent = captainA;
      document.getElementById('captainBName').textContent = captainB;
      document.getElementById('maxPlayersRule').innerHTML = `Maximum <b>${maxPlayers}</b> players per team.`;
      renderPlayer();
      updateTeams();
    }
    function resetAuction() {
      if (confirm("Are you sure you want to reset the auction and start over?")) {
        localStorage.removeItem('captainA');
        localStorage.removeItem('captainB');
        localStorage.removeItem('auctionPlayers');
        window.location.href = "team-management.html";
      }
    }
    // On load
    startAuction();
    // Code Generated by Sidekick is for learning and experimentation purposes only.
function exportAuctionPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // Title
  doc.setFontSize(18);
  doc.text("Cricket Team Player Auction Results", 14, 16);

  // Team A
  doc.setFontSize(14);
  doc.text(`Team A - ${document.getElementById('captainAName').textContent}`, 14, 28);
  doc.setFontSize(11);
  doc.text(`Remaining Budget: ‚Çπ${budgetA}`, 14, 34);

  let y = 40;
  doc.text("Player", 14, y);
  doc.text("Price", 80, y);
  y += 6;
  teamAList.forEach(p => {
    doc.text(`${p.name} (${p.role})`, 14, y);
    doc.text(`‚Çπ${p.price}`, 80, y);
    y += 6;
  });

  // Team B
  y += 8;
  doc.setFontSize(14);
  doc.text(`Team B - ${document.getElementById('captainBName').textContent}`, 14, y);
  doc.setFontSize(11);
  y += 6;
  doc.text(`Remaining Budget: ‚Çπ${budgetB}`, 14, y);
  y += 6;
  doc.text("Player", 14, y);
  doc.text("Price", 80, y);
  y += 6;
  teamBList.forEach(p => {
    doc.text(`${p.name} (${p.role})`, 14, y);
    doc.text(`‚Çπ${p.price}`, 80, y);
    y += 6;
  });

  // Common Player (if any)
  const commonPlayerStr = localStorage.getItem('commonPlayer');
  if (commonPlayerStr) {
    const common = JSON.parse(commonPlayerStr);
    y += 8;
    doc.setFontSize(12);
    doc.text(`Common Player (not assigned): ${common.name} (${common.role})`, 14, y);
  }

  doc.save("auction_results.pdf");
}

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
